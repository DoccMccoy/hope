# ساخت کانفیگ Reality

تیم توسعه دهنده XRay با ابداع پروتکل Reality روش‌های قدیمی‌تر را منسوخ کرده و از همه خواسته از روش جدید استفاده کنند. نکات زیر در مورد این پروتکل پر اهمیت هستند:

* این پروتکل نیاز به تهیه دامنه (domain) ندارد.
* این پروتکل نیاز به تهیه cert معتبر ندارد.
* این پروتکل با CDN سازگار نیست. در نتیجه تنها راه ارتباط مستقیم با سرور می‌باشد. در نتیجه باید IP سروری که تهیه کرده‌اید حتما تمیز باشد.
* این پروتکل نوع خاصی از پروتکل TCP می‌باشد که فقط برای مکانیزم VLESS تهیه شده. در نتیجه مکانیزم Trojan و یا VMESS با Reality سازگار نیستند.
* در آیفون باید از [اپلیکیشن Wings X](https://github.com/iranxray/hope/blob/main/install-iphone.md) استفاده کنید.
* در اندروید باید از [نسخه آزمایشی V2RayNG‌](https://github.com/iranxray/hope/blob/main/install-android.md) استفاده کنید. در لحظه نگارش مقاله هنوز نسخه رسمی V2RayNG برای پشتیبانی از Reality عرضه نشده.


مهم‌ترین نقطه قوت Reality دقیقا در همین نکته می‌باشد که نیاز به تهیه دامنه مرتفع شده و لزومی به پرداخت هزینه و یا تولید cert‌ نداریم. 

# نکات امنیتی
* ما توصیه می‌کنیم که برای وارد شدن به پنل Kafka حتما از فیلترشکن استفاده کنید تا شانس لو رفتن پنل کاسته شود. در غیر این صورت، احتمال دارد فیلترچی متوجه شود که بر روی سرور شما Kafka نصب شده است.
* در صورت امکان، توصیه می‌کنیم از پنل وب شرکت برای SSH زدن به سرور استفاده کنید. برخی از شرکت‌ها مثل Vultr این امکان را فراهم کرده‌اند. اگر داخل ایران هستید، برقراری ارتباط مستقیم SSH به سرور ممکن است شانس شناسایی سرور شما را افزایش دهد. اگر هم در خارج از کشور هستید، توصیه می‌کنیم پس از نصب Kafka پورت SSH را از طریق Firewall مسدود کنید.
* به [مستند Routing‌](https://github.com/iranxray/hope/blob/main/routing.md) مراجعه کنید تا ترافیک داخلی را بر روی سرور خود ببندید و به گوشی اجازه دهید بدون عبور از فیلترشکن از سایت‌های داخلی استفاده کند. استفاد از سایت‌های داخلی توسط فیلترشکن برای فیلترچی خط قرمز است.

## گام اول

پیش‌فرض ما این است که شما [پنل Kafka](https://github.com/iranxray/hope/blob/main/install-xui.md) را نصب کرده‌اید. حالا در صفحه Inbounds، بر روی دکمه Add Inbound کلیک کنید.

![image](https://user-images.githubusercontent.com/118040490/232978405-ce620e1c-4953-407f-8347-704184e093ef.png)

صفحه ساخت کانفیگ باز می‌شود.

![image](https://user-images.githubusercontent.com/118040490/232978499-34efd44b-85f0-4578-b138-834a04cd2e4c.png)


## گام دوم

در عکس زیر، تغییراتی را که لازم است داده شود با رنگ قرمز مشخص کرده‌ایم.

![image](https://user-images.githubusercontent.com/118040490/232978264-3e297a1a-2969-437b-a718-b0c514402e8f.png)

* فیلد Remark: صرفا اسمی برای کانفیگ شما است. هر مقدار دلخواهی می‌توانید انتخاب کنید.
* فیلد Port: حتما برابر با `443‍` باشد.
* فیلد Reality: حتما باید انتخاب شده باشد.
* فیلد ServerName و Dest: مقادیر این فیلد می‌تواند هر آدرسی باشد که در خارج از ایران قرار گرفته و فیلتر نیست. ما اینجا از `www.google.com‌` برای ServerName و از `www.google.com:443` برای dest استفاده کردیم. اهمیت این فیلد در این می‌باشد که فیلترچی گمان می‌کند ترافیک شما به Google‌ می‌رود و از آنجا که Google‌ فیلتر نیست، ترافیک شما عبور می‌کند. اگر با google جواب نگرفتید،  شما می‌توانید آدرس‌های دیگری هم امتحان کنید. مثل www.amazon.com ، www.telewebion.com و یا www.aparat.com و اصولا هر سایت خارجی معتبری که مسدود نیست.

## گام سوم
بر روی دکمه Add User کلیک کنید.

![image](https://user-images.githubusercontent.com/118040490/232979522-d74c9f71-53c6-47f9-8073-8d5d8a0fd85d.png)


و تغییراتی که با قرمز مشخص شده‌اند را اعمال کنید.

![image](https://user-images.githubusercontent.com/118040490/232979816-25bf99fb-fd24-49ca-ae2f-09618235db86.png)

* فیلد Flow: حتما برابر با `xtls-rprx-vision` ‌انتخاب شود. این تنها Flow معتبر برای استفاده همراه با VLESS می‌باشد. باقی روش‌ها منسوخ شده‌اند و ایمن نیستند.
* فیلد utls: حتما `Chrome` انتخاب شده باشد. کاربرد utls‌ این می‌باشد که فیلترچی گمان می‌کند ترافیک دستگاه شما از مرورگر Chrome می‌آید. در نتیجه کمتر مشکوک خواهد بود.

## گام چهارم

دکمه Add را بزنید و تمام. خواهید دید که کانفیگ به موفقیت به فهرست اضافه شده و آماده استفاده می‌باشد.

![image](https://user-images.githubusercontent.com/118040490/232980581-d7c0633f-2768-431f-892b-593f0607db38.png)

:star:
نکته مهم، حتما مطمئن شوید که بعد از ساخت هر کانفیگ، پورت مربوط به آن کانفیگ بر روی server باز بوده و آماده پذیرش ترافیک ورودی می‌باشد. برای این موضوع به مستندات شرکتی که server شما را میزبانی می‌کند رجوع نمایید.

## گام پنجم

حالا که کانفیگ با موفقیت ساخته شده، نوبت به اشتراک‌گذاری کانفیگ با کاربر عزیز رسیده تا کمک‌ کنیم به اینترنت آزاد متصل شود. می‌توانید کانفیگ را به طریق زیر کپی نمایید.

![image](https://user-images.githubusercontent.com/118040490/232980839-0675765a-42b7-4b3d-ad3b-3e4c37476f60.png)

![image](https://user-images.githubusercontent.com/118040490/232980919-0ffffb57-171c-4197-a4f4-590245732af0.png)

![image](https://user-images.githubusercontent.com/118040490/232980982-67b99bab-e9cc-4f8b-ae1e-5cbfe4c05885.png)


## گام ششم

حالا که کانفیگ کپی شده، می‌توانید یاد بگیرید چطور به [اندروید](https://github.com/iranxray/hope/blob/main/install-android.md) و یا [آیفون](https://github.com/iranxray/hope/blob/main/install-iphone.md) این تنظیمات را اضافه کنید
